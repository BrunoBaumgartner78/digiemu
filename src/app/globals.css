/* src/app/globals.css */

@tailwind base;
@tailwind components;
@tailwind utilities;

@import "./theme-tokens.css";

html { scroll-behavior: smooth; }

/* =========================================================
   THEME TRUTH
   - If next-themes sets html[data-theme], that wins.
   - prefers-color-scheme is only a fallback when no data-theme.
   ========================================================= */

html[data-theme="light"] { color-scheme: light; }
html[data-theme="dark"] { color-scheme: dark; }

@media (prefers-color-scheme: dark) {
  html:not([data-theme]) { color-scheme: dark; }
}

/* =========================================================
   TOKENS (Light default)
   Keep your neumorph vibe + add unified UI state tokens
   ========================================================= */

:root {
  /* --- Core surfaces --- */
  --bg: #e5ecf5;
  --bg-soft: #eef3fb;

  --page-bg: #e5edf7;
  --card-bg: #f9fbff;

  --border-soft: rgba(0, 0, 0, 0.06);

  /* --- Typography --- */
  --ui-text: #0b1220;
  --ui-muted: rgba(11, 18, 32, 0.68);

  --text-main: var(--ui-text);
  --text-muted: #64748b;
  --fg: var(--ui-text);

  /* For legacy usage in your styles */
  --txt: var(--ui-text);
  --txt-muted: var(--ui-muted);
  --color-text-primary: var(--ui-text);
  --color-text-muted: var(--ui-muted);

  /* --- Accent --- */
  --accent: #4a7cff;
  --accent-strong: #2563eb;
  --accent-dark: #1d4ed8;
  --accent-soft: #dbe6ff;
  --accent-subtle: rgba(37, 99, 235, 0.14);

  /* --- Neumorph shadows (light) --- */
  --shadow-light: rgba(255, 255, 255, 0.9);
  --shadow-dark: rgba(163, 177, 198, 0.9);

  /* --- Radius / transitions --- */
  --radius-xl: 1.4rem;
  --radius-lg: 1rem;
  --radius-md: 0.8rem;

  --transition-fast: 150ms ease-out;
  --transition: 200ms ease-out;

  /* --- Admin / cards gradients (light) --- */
  --neo-card-bg-soft: radial-gradient(
    circle at 0% 0%,
    rgba(248, 250, 252, 0.98),
    rgba(226, 232, 240, 0.96)
  );
  --neo-card-bg-strong: radial-gradient(
    circle at 0% 0%,
    rgba(248, 250, 252, 0.98),
    rgba(229, 231, 235, 0.96)
  );
  --neo-card-border: rgba(148, 163, 184, 0.5);

  /* --- Admin table tokens (light) --- */
  --admin-table-header-bg: linear-gradient(
    135deg,
    rgba(148, 163, 184, 0.55),
    rgba(226, 232, 240, 0.98)
  );
  --admin-table-row-bg: linear-gradient(
    135deg,
    rgba(248, 250, 252, 0.98),
    rgba(226, 232, 240, 0.96)
  );
  --admin-table-row-alt-bg: linear-gradient(
    135deg,
    rgba(241, 245, 249, 0.98),
    rgba(226, 232, 240, 0.96)
  );
  --admin-table-hover-bg: radial-gradient(
    circle at 0% 0%,
    rgba(148, 180, 248, 0.25),
    rgba(226, 232, 240, 1)
  );
  --admin-table-header-text: rgba(71, 85, 105, 0.95);
  --admin-table-body-text: #0f172a;
  --admin-table-border-header: rgba(148, 163, 184, 0.6);
  --admin-table-border-row: rgba(148, 163, 184, 0.28);

  /* --- Unified UI states (works everywhere) --- */
  --ui-focus: rgba(37, 99, 235, 0.55);
  --ui-focus-soft: rgba(37, 99, 235, 0.18);

  --ui-error: rgba(220, 38, 38, 0.78);
  --ui-error-soft: rgba(220, 38, 38, 0.18);

  --ui-success: rgba(16, 185, 129, 0.78);
  --ui-success-soft: rgba(16, 185, 129, 0.18);

  /* Neon/glass tokens (light) */
  --neo-accent: 82 140 255;
  --neo-accent-2: 110 231 183;
  --neo-glow: rgba(82,140,255,.35);
  --neo-glow-strong: rgba(82,140,255,.55);

  --neo-glass: rgba(255,255,255,.42);
  --neo-glass-2: rgba(255,255,255,.24);
  --neo-stroke: rgba(120,140,180,.28);

  --neo-shadow-1: 0 14px 40px rgba(15, 23, 42, .10);
  --neo-shadow-2: 0 2px 0 rgba(255,255,255,.65) inset;
  --neo-shadow-soft: 0 18px 55px rgba(15, 23, 42, .12);

  /* Notice tokens */
  --notice-bg: rgba(255,255,255,0.62);
  --notice-border: rgba(148,163,184,0.45);
  --notice-text: var(--txt, #0b1220);

  --notice-info: 59 130 246;    /* blue */
  --notice-success: 34 197 94;  /* green */
  --notice-error: 239 68 68;    /* red */
  --notice-warn: 245 158 11;    /* amber */
}

/* =========================================================
   DARK MODE TOKENS
   Applied when data-theme="dark" (preferred) or fallback
   ========================================================= */

html[data-theme="dark"],
html.dark {
  --bg: #050712;
  --bg-soft: #0b1020;

  --page-bg: #020617;
  --card-bg: #020817;

  --ui-text: rgba(239, 246, 255, 0.92);
  --ui-muted: rgba(148, 163, 184, 0.88);

  --text-main: var(--ui-text);
  --text-muted: rgba(229, 231, 235, 0.60);
  --fg: var(--ui-text);

  --txt: var(--ui-text);
  --txt-muted: var(--ui-muted);
  --color-text-primary: var(--ui-text);
  --color-text-muted: var(--ui-muted);

  --accent: #70a0ff;
  --accent-soft: #17254a;
  --accent-strong: #3b82f6;
  --accent-dark: #1d4ed8;
  --accent-subtle: rgba(37, 99, 235, 0.26);

  --border-soft: rgba(255, 255, 255, 0.08);

  --shadow-light: rgba(40, 50, 80, 0.95);
  --shadow-dark: rgba(0, 0, 0, 0.95);

  --neo-card-bg-soft: radial-gradient(
    circle at 0% 0%,
    rgba(37, 99, 235, 0.22),
    rgba(15, 23, 42, 0.97)
  );
  --neo-card-bg-strong: radial-gradient(
    circle at 0% 0%,
    rgba(37, 99, 235, 0.2),
    rgba(3, 7, 18, 0.98)
  );
  --neo-card-border: rgba(129, 140, 248, 0.7);

  --admin-table-header-bg: radial-gradient(
    circle at top left,
    rgba(70, 90, 160, 0.4),
    rgba(7, 10, 25, 0.95)
  );
  --admin-table-row-bg: linear-gradient(
    135deg,
    rgba(4, 7, 18, 0.98),
    rgba(7, 11, 26, 0.98)
  );
  --admin-table-row-alt-bg: linear-gradient(
    135deg,
    rgba(7, 10, 23, 0.98),
    rgba(10, 14, 30, 0.98)
  );
  --admin-table-hover-bg: radial-gradient(
    circle at top left,
    rgba(74, 124, 255, 0.18),
    rgba(7, 10, 23, 1)
  );

  --admin-table-header-text: rgba(226, 232, 255, 0.9);
  --admin-table-body-text: #e5e7eb;
  --admin-table-border-header: rgba(110, 130, 200, 0.35);
  --admin-table-border-row: rgba(15, 23, 42, 0.8);

  /* focus ring slightly softer neon in dark */
  --ui-focus: rgba(96, 165, 250, 0.62);
  --ui-focus-soft: rgba(96, 165, 250, 0.22);

  --ui-error: rgba(248, 113, 113, 0.85);
  --ui-error-soft: rgba(248, 113, 113, 0.20);

  --ui-success: rgba(52, 211, 153, 0.88);
  --ui-success-soft: rgba(52, 211, 153, 0.20);

  --notice-bg: rgba(12,18,38,0.62);
  --notice-border: rgba(148,163,184,0.18);
  --notice-text: var(--txt, rgba(239,246,255,0.92));
}



/* prefers-color-scheme fallback only if no data-theme */
@media (prefers-color-scheme: dark) {
  html:not([data-theme]) {
    --bg: #050712;
    --bg-soft: #0b1020;
    --page-bg: #020617;
    --card-bg: #020817;
    --ui-text: rgba(239, 246, 255, 0.92);
    --ui-muted: rgba(148, 163, 184, 0.88);
    --text-main: var(--ui-text);
    --text-muted: rgba(229, 231, 235, 0.60);
    --fg: var(--ui-text);
    --txt: var(--ui-text);
    --txt-muted: var(--ui-muted);
    --color-text-primary: var(--ui-text);
    --color-text-muted: var(--ui-muted);

    --accent: #70a0ff;
    --accent-soft: #17254a;
    --accent-strong: #3b82f6;
    --accent-dark: #1d4ed8;
    --accent-subtle: rgba(37, 99, 235, 0.26);

    --border-soft: rgba(255, 255, 255, 0.08);
    --shadow-light: rgba(40, 50, 80, 0.95);
    --shadow-dark: rgba(0, 0, 0, 0.95);

    --ui-focus: rgba(96, 165, 250, 0.62);
    --ui-focus-soft: rgba(96, 165, 250, 0.22);
  }
}

/* =========================================================
   GLOBAL BASE
   ========================================================= */

* { box-sizing: border-box; }

html, body {
  height: 100%;
  margin: 0;
  padding: 0;
  max-width: 100%;
  overflow-x: hidden;
  background: var(--page-bg);
}

body {
  font-family: system-ui, -apple-system, BlinkMacSystemFont, Inter, "SF Pro Text",
    "Segoe UI", sans-serif;
  -webkit-font-smoothing: antialiased;
  text-rendering: optimizeLegibility;
  transition: background-color 0.18s ease, color 0.18s ease;
  color: var(--ui-text);
  background: var(--page-bg);
}

a { color: inherit; text-decoration: none; }
button { font: inherit; }
img { max-width: 100%; height: auto; display: block; }

/* Layout helpers */
.page-shell { min-height: 100vh; display: flex; flex-direction: column; }
.page-main { flex: 1; padding: 1.5rem 1rem; }

/* =========================
   Global Type Utilities
   ========================= */
.ui-h1 { font-size: var(--fs-h1); line-height: var(--lh-h1); font-weight: var(--fw-h1); letter-spacing: var(--ls-tight); }
.ui-h2 { font-size: var(--fs-h2); line-height: var(--lh-h2); font-weight: var(--fw-h2); letter-spacing: var(--ls-tight); }
.ui-h3 { font-size: var(--fs-h3); font-weight: var(--fw-h3); }
.ui-p  { font-size: var(--fs-body); line-height: var(--lh-body); font-weight: var(--fw-body); }
.ui-small { font-size: var(--fs-small); }
.ui-label { font-size: var(--fs-label); letter-spacing: var(--ls-label); text-transform: uppercase; font-weight: var(--fw-label); }

/* Muted helper (falls nicht schon vorhanden) */
.ui-muted { color: var(--txt-muted); }

/* =========================
   Consistent Focus States
   ========================= */
:where(a, button, input, textarea, select, [role="button"]):focus {
  outline: none;
}
:where(a, button, input, textarea, select, [role="button"]):focus-visible {
  box-shadow: var(--focus-ring);
}

/* =========================
   Disabled baseline
   ========================= */
:where(button, input, textarea, select):disabled {
  opacity: var(--disabled-opacity, 0.6);
  cursor: not-allowed;
}

/* Optional: micro-hover smoothing (safe) */
:where(button, a).neobtn:hover {
  filter: brightness(var(--hover-brightness, 1.03));
}
:where(button, a).neobtn:active {
  filter: brightness(var(--active-brightness, 1.01));
}
@media (min-width: 768px) { .page-main { padding: 2.5rem 1.5rem; } }

.page-shell-wide {
  max-width: 1160px;
  margin: 0 auto;
  padding-inline: 2.4rem;
  padding-block: 2.5rem;
}
@media (max-width: 900px) {
  .page-shell-wide {
    width: 100%;
    max-width: 480px;
    padding-inline: 0.9rem;
    padding-block: 1.4rem 2.6rem;
  }
}

/* =========================================================
   UNIFIED FOCUS / ERROR / SUCCESS
   ========================================================= */

.input-neu:focus,
.categorySelect:focus,
.profile-form input[type="text"]:focus,
.profile-form textarea:focus {
  border-color: var(--ui-focus) !important;
  box-shadow: 0 0 0 3px var(--ui-focus-soft) !important;
  outline: none !important;
}

.isError, .inputError {
  border-color: var(--ui-error) !important;
  box-shadow: 0 0 0 3px var(--ui-error-soft) !important;
}
.isSuccess, .inputSuccess {
  border-color: var(--ui-success) !important;
  box-shadow: 0 0 0 3px var(--ui-success-soft) !important;
}

.neobtn:focus-visible,
.neobtn-sm:focus-visible,
.neonBtn:focus-visible,
.admin-nav-pill:focus-visible,
.admin-menu-pill:focus-visible {
  outline: none !important;
  box-shadow:
    0 0 0 3px var(--ui-focus-soft),
    0 0 0 1px var(--ui-focus) !important;
}

/* =========================================================
   YOUR EXISTING STYLES (kept compatible)
   ========================================================= */

/* Neo link */
.neo-link{
  color: inherit;
  text-decoration: none;
  border-bottom: 1px solid color-mix(in srgb, var(--ui-text) 22%, transparent);
  padding-bottom: 1px;
}
.neo-link:hover{
  border-bottom-color: color-mix(in srgb, var(--ui-text) 55%, transparent);
}

/* Neumorph card */
.neumorph-card {
  border-radius: var(--radius-xl);
  background: var(--bg-soft);
  box-shadow: 12px 12px 24px var(--shadow-dark),
    -12px -12px 24px var(--shadow-light);
  border: 1px solid var(--border-soft);
  transition: transform var(--transition-fast),
    box-shadow var(--transition-fast),
    background var(--transition);
}
.neumorph-card:hover {
  transform: translateY(-2px);
  box-shadow: 16px 16px 32px var(--shadow-dark),
    -16px -16px 32px var(--shadow-light);
}
.neumorph-card.flat {
  box-shadow: 6px 6px 12px var(--shadow-dark),
    -6px -6px 12px var(--shadow-light);
}

/* Inputs */
.input-neu {
  width: 100%;
  padding: 0.6rem 0.8rem;
  border-radius: var(--radius-md);
  border: 1px solid var(--border-soft);
  background: var(--bg-soft);
  color: var(--fg);
  box-shadow:
    inset 4px 4px 8px rgba(0, 0, 0, 0.04),
    inset -4px -4px 8px var(--shadow-light);
  outline: none;
  transition: border-color var(--transition-fast),
    box-shadow var(--transition-fast),
    background var(--transition);
  font-size: 0.95rem;
}
.input-neu::placeholder { color: rgba(0, 0, 0, 0.35); }
@media (prefers-color-scheme: dark) {
  html[data-theme="dark"] .input-neu::placeholder,
  html:not([data-theme]) .input-neu::placeholder { color: rgba(255, 255, 255, 0.35); }
}
textarea.input-neu { resize: vertical; min-height: 120px; }

/* Buttons */
.neobtn, .neobtn-sm {
  position: relative;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  gap: 0.4rem;
  border-radius: 999px;
  border: 1px solid rgba(255, 255, 255, 0.5);
  background: linear-gradient(145deg, var(--bg-soft), #ffffff);
  color: var(--fg);
  cursor: pointer;
  white-space: nowrap;
  user-select: none;
  box-shadow: 8px 8px 16px var(--shadow-dark),
    -8px -8px 16px var(--shadow-light);
  transition:
    transform var(--transition-fast),
    box-shadow var(--transition-fast),
    background var(--transition-fast),
    border-color var(--transition-fast),
    color var(--transition-fast);
}

/* =========================
   Global Notices
   .notice / .noticeSuccess / .noticeError / .noticeWarn
   ========================= */

.notice{
  display:flex;
  align-items:flex-start;
  gap:.65rem;

  padding:.9rem 1rem;
  border-radius: 18px;

  background: var(--notice-bg);
  color: var(--notice-text);
  border: 1px solid var(--notice-border);

  box-shadow:
    0 18px 45px rgba(15,23,42,.10),
    inset 0 1px 0 rgba(255,255,255,.55);

  backdrop-filter: blur(12px);
}

.notice::before{
  content:"";
  width: 10px;
  height: 10px;
  border-radius: 999px;
  margin-top: .35rem;
  flex: 0 0 auto;

  background: rgba(var(--notice-info), .95);
  box-shadow: 0 0 0 3px rgba(var(--notice-info), .14), 0 0 18px rgba(var(--notice-info), .28);
}

.noticeTitle{
  font-weight: 700;
  line-height: 1.2;
  margin: 0 0 .15rem;
}

.noticeText{
  margin: 0;
  opacity: .92;
  line-height: 1.5;
  font-size: .92rem;
}

/* Variants */
.noticeSuccess::before{
  background: rgba(var(--notice-success), .95);
  box-shadow: 0 0 0 3px rgba(var(--notice-success), .14), 0 0 18px rgba(var(--notice-success), .28);
}
.noticeError::before{
  background: rgba(var(--notice-error), .95);
  box-shadow: 0 0 0 3px rgba(var(--notice-error), .14), 0 0 18px rgba(var(--notice-error), .28);
}
.noticeWarn::before{
  background: rgba(var(--notice-warn), .95);
  box-shadow: 0 0 0 3px rgba(var(--notice-warn), .14), 0 0 18px rgba(var(--notice-warn), .28);
}

/* Optional compact */
.noticeCompact{
  padding: .7rem .85rem;
  border-radius: 16px;
}

html[data-theme="dark"] .neobtn,
html[data-theme="dark"] .neobtn-sm {
  border-color: rgba(255, 255, 255, 0.06);
  background: radial-gradient(circle at top left, #1f2743, #0b1020);
}
.neobtn { padding: 0.6rem 1.5rem; font-size: 0.95rem; font-weight: 600; }
.neobtn-sm { padding: 0.35rem 0.9rem; font-size: 0.85rem; font-weight: 500; }

.neobtn:hover, .neobtn-sm:hover {
  transform: translateY(-1px);
  box-shadow: 10px 10px 20px var(--shadow-dark),
    -10px -10px 20px var(--shadow-light);
}
.neobtn:active, .neobtn-sm:active {
  transform: translateY(0);
  box-shadow: 4px 4px 10px var(--shadow-dark),
    -4px -4px 10px var(--shadow-light);
}
.neobtn.primary, .neobtn-sm.primary {
  background: linear-gradient(145deg, var(--accent-strong), #8faeff);
  color: #ffffff;
  border-color: rgba(255, 255, 255, 0.8);
}
.neobtn.ghost, .neobtn-sm.ghost {
  background: transparent;
  border-color: var(--border-soft);
  box-shadow: none;
}
.neobtn.ghost:hover, .neobtn-sm.ghost:hover {
  background: rgba(255, 255, 255, 0.45);
  box-shadow: 4px 4px 10px var(--shadow-dark),
    -4px -4px 10px var(--shadow-light);
}
.neobtn-sm.danger {
  background: linear-gradient(145deg, #ff6b6b, #ff8787);
  color: #fff;
  border-color: rgba(255, 255, 255, 0.8);
}

/* Scrollbars */
::-webkit-scrollbar { width: 8px; height: 8px; }
::-webkit-scrollbar-track { background: transparent; }
::-webkit-scrollbar-thumb { background: rgba(0, 0, 0, 0.1); border-radius: 999px; }
html[data-theme="dark"] ::-webkit-scrollbar-thumb { background: rgba(255, 255, 255, 0.14); }

/* Neon card / border / glow helpers (your NEON NEU) */
.neonCard{
  background: linear-gradient(180deg, var(--neo-glass), var(--neo-glass-2));
  border: 1px solid var(--neo-stroke);
  border-radius: 28px;
  box-shadow: var(--neo-shadow-1), var(--neo-shadow-2);
  backdrop-filter: blur(14px);
}
.neonBorder{ position: relative; isolation: isolate; }
.neonBorder::before{
  content:"";
  position:absolute;
  inset:-1px;
  border-radius: inherit;
  padding: 1px;
  background: linear-gradient(
    135deg,
    rgba(var(--neo-accent), .55),
    rgba(255,255,255,.10),
    rgba(var(--neo-accent-2), .28)
  );
  -webkit-mask: linear-gradient(#000 0 0) content-box, linear-gradient(#000 0 0);
  -webkit-mask-composite: xor;
          mask-composite: exclude;
  pointer-events:none;
  opacity:.55;
  z-index:-1;
}
.glowSoft{
  box-shadow:
    var(--neo-shadow-soft),
    0 0 0 1px rgba(var(--neo-accent), .08),
    0 0 40px var(--neo-glow);
}
.glowStrong{
  box-shadow:
    var(--neo-shadow-soft),
    0 0 0 1px rgba(var(--neo-accent), .14),
    0 0 65px var(--neo-glow-strong);
}
.glowHover:hover{
  transform: translateY(-1px);
  box-shadow:
    var(--neo-shadow-soft),
    0 0 0 1px rgba(var(--neo-accent), .18),
    0 0 70px var(--neo-glow-strong);
  transition: box-shadow .2s ease, transform .2s ease;
}
.neonBtn{
  display:inline-flex;
  align-items:center;
  justify-content:center;
  gap:.45rem;
  padding:.55rem 1rem;
  border-radius:999px;
  border:1px solid rgba(var(--neo-accent), .25);
  background: linear-gradient(180deg, rgba(255,255,255,.58), rgba(255,255,255,.22));
  box-shadow:
    0 10px 25px rgba(15, 23, 42, .12),
    0 0 35px rgba(var(--neo-accent), .22);
  backdrop-filter: blur(14px);
}
.neonBtnActive{
  border-color: rgba(var(--neo-accent), .55);
  box-shadow:
    0 14px 35px rgba(15, 23, 42, .14),
    0 0 55px rgba(var(--neo-accent), .35);
}
.neonBtn:hover{
  box-shadow:
    0 14px 35px rgba(15, 23, 42, .14),
    0 0 60px rgba(var(--neo-accent), .42);
  transition: box-shadow .2s ease;
}

/* Footer safety */
footer table, footer tr, footer td, footer th { border: 0 !important; }
footer hr { display: none !important; }
footer a { text-decoration-thickness: from-font; }
